# Xperience by Kentico: Kentico Migration Tool

[![7-day bug-fix policy](https://img.shields.io/badge/-7--days_bug--fixing_policy-grey?labelColor=orange&logo=data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ic3ZnLWljb24iIHN0eWxlPSJ3aWR0aDogMWVtOyBoZWlnaHQ6IDFlbTt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO2ZpbGw6IGN1cnJlbnRDb2xvcjtvdmVyZmxvdzogaGlkZGVuOyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik04ODguNDkgMjIyLjY4NnYtMzEuNTRsLTY1LjY3Mi0wLjk1NWgtMC4yMDVhNDY1LjcxNSA0NjUuNzE1IDAgMCAxLTE0NC4zMTUtMzEuMzM0Yy03Ny4wMDUtMzEuMTk4LTEyNi4yOTQtNjYuNzY1LTEyNi43MDMtNjcuMTA3bC0zOS44LTI4LjY3Mi0zOS4xODUgMjguNDY4Yy0yLjA0OCAxLjUwMS00OS45MDMgMzYuMDQ0LTEyNi45MDggNjcuMzFhNDQ3LjQyIDQ0Ny40MiAwIDAgMS0xNDQuNTIgMzEuMzM1bC02NS44NzcgMC45NTZ2Mzc4Ljg4YzAgODcuMDQgNDkuODM0IDE4NC42NjEgMTM3LjAxIDI2Ny44MSAzNy41NDcgMzUuODQgNzkuMjU4IDY2LjM1NSAxMjAuODMzIDg4LjIgNDMuMjggMjIuNzMzIDg0LjI0IDM0LjYxMiAxMTguODUyIDM0LjYxMiAzNC40MDYgMCA3NS43NzYtMTIuMTUyIDExOS42MDMtMzUuMTU4YTU0Ny45NzcgNTQ3Ljk3NyAwIDAgMCAxMjAuMDEzLTg3LjY1NCA1MTUuMjA5IDUxNS4yMDkgMCAwIDAgOTYuMTg4LTEyMi44OGMyNy4xMDItNDkuNTYyIDQwLjgyMy05OC4zMDQgNDAuODIzLTE0NC45OTlsLTAuMTM2LTM0Ny4yMDR6TTUxMC4wOSAxNDMuNDI4bDEuNzA2LTEuMzY1IDEuNzc1IDEuMzY1YzUuODAzIDQuMTY1IDU5LjUyOSA0MS44NDggMTQwLjM1NiA3NC43NTIgNzkuMTkgMzIuMDg2IDE1My42IDM1LjYzNSAxNjcuNjYzIDM2LjA0NWwyLjU5NCAwLjA2OCAwLjIwNSAzMTUuNzM0YzAuMTM3IDY5LjQ5NS00Mi41OTggMTUwLjE4Ni0xMTcuMDc3IDIyMS40NTdDNjQxLjU3IDg1NC4yODkgNTYzLjEzIDg5Ni40NzggNTEyIDg5Ni40NzhjLTIzLjY4OSAwLTU1LjU3LTkuODk5LTg5LjcwMi0yNy43ODVhNDc4LjgyMiA0NzguODIyIDAgMCAxLTEwNS42MDktNzcuMjc4QzI0Mi4yMSA3MjAuMjEzIDE5OS40NzUgNjM5LjUyMiAxOTkuNDc1IDU2OS44OVYyNTQuMjI1bDIuNzMtMC4xMzZjMy4yNzggMCA4Mi42MDQtMS41MDIgMTY3LjY2NC0zNS45NzdhNzM5Ljk0MiA3MzkuOTQyIDAgMCAwIDE0MC4yMi03NC42MTV2LTAuMDY5eiIgIC8+PHBhdGggZD0iTTcxMy4zMTggMzY4LjY0YTMyLjIyMiAzMi4yMjIgMCAwIDAtNDUuMzI5IDBMNDQ5LjE5NSA1ODcuNDM1bC05My4xODQtOTMuMTE2YTMyLjIyMiAzMi4yMjIgMCAwIDAtNDUuMzMgMCAzMi4yMjIgMzIuMjIyIDAgMCAwIDAgNDUuMjZsMTE1Ljg1IDExNS44NWEzMi4yOSAzMi4yOSAwIDAgMCA0NS4zMjggMEw3MTMuMzIgNDEzLjlhMzIuMjIyIDMyLjIyMiAwIDAgMCAwLTQ1LjMzeiIgIC8+PC9zdmc+)](https://github.com/Kentico/.github/blob/main/SUPPORT.md#full-support)

[![CI: Build and Test](https://github.com/Kentico/xperience-by-kentico-kentico-migration-tool/actions/workflows/build.yml/badge.svg?branch=master)](https://github.com/Kentico/xperience-by-kentico-kentico-migration-tool/actions/workflows/build.yml)

## Description

This repository is part of the [Xperience by Kentico Migration Toolkit](https://github.com/Kentico/xperience-by-kentico-migration-toolkit).

The Kentico Migration Tool transfers content and other data from **Kentico Xperience 13**, **Kentico 12** or **Kentico 11** to **Xperience by Kentico**.

This tool supports migrating a project to Xperience by Kentico over multiple migration runs with built-in and custom data transformations.

## Complete Upgrade Documentation  

This repository contains the migration tool and technical reference documentation. For complete guidance upgrades, specifically on upgrading from Kentico Xperience 13 to Xperience by Kentico, including planning, walkthroughs, and advanced techniques, see our [Learn portal upgrade guides](https://docs.kentico.com/x/migrate_from_kx13_guides).

### All Resources

**→ [Complete Documentation Hub](./docs/GUIDES.md)** - Organized guide to all upgrade resources

**Quick Links:**
upgrade- [Upgrade Overview](https://docs.kentico.com/guides/architecture/upgrade-from-kx13/upgrade-from-kx13-overview) - Understand the upgrade process on a high-level
- [Plan Your Strategy](https://docs.kentico.com/guides/architecture/upgrade-from-kx13/plan-your-strategy-for-migrating-features) - Kentico Xperience 13 and Xperience by Kentico capabity comparison to help you estimate effort by feature
- [Video Walkthrough](https://docs.kentico.com/guides/architecture/upgrade-from-kx13/upgrade-walkthrough) - Hands-on tutorial with our Dancing Goat sample site
- [Upgrades FAQ for architects and team leads](https://docs.kentico.com/guides/architecture/upgrade-from-kx13/upgrade-faq) - Answers to common questions and challenges

## Repository Structure

This repository contains multiple projects that work together to perform migrations:

### Core Migration Engine

| Project | Purpose |
|---------|---------|
| **Migration.Tool.CLI** | Command-line interface - the executable you run to perform migrations |
| **Migration.Tool.Common** | Shared infrastructure (configuration, logging, commands, protocols) |
| **Migration.Tool.KXP.Api** | Target instance API - interacts with Xperience by Kentico database and APIs |

### Version-Specific Migration Logic

Each source version has dedicated projects for migration logic:

| Project | Purpose |
|---------|---------|
| **Migration.Tool.Core.K11** | Kentico 11-specific migration handlers and mappers |
| **Migration.Tool.Core.KX12** | Kentico 12-specific migration handlers and mappers |
| **Migration.Tool.Core.KX13** | Kentico Xperience 13-specific migration handlers and mappers |
| **Migration.Tool.K11** | Kentico 11 source database models and context |
| **Migration.Tool.KX12** | Kentico 12 source database models and context |
| **Migration.Tool.KX13** | Kentico Xperience 13 source database models and context |

### Customization & Extensions

| Project | Purpose |
|---------|---------|
| **Migration.Tool.Extensions** | Your custom migrations (field migrations, widget migrations, class mappings) |
| **Migration.Tool.KXP.Extensions** | Sample target instance customizations (optional) |
| **KX13.Extensions** | ASP.NET Core controller for API discovery on KX13 source instances |
| **KX13.NET48.Extensions** | .NET Framework 4.8 controller for API discovery on KX13 source instances |

### How They Work Together

```
┌─────────────────────────────────────────────────────────────────┐
│  Migration.Tool.CLI (Your Entry Point)                          │
│  • Reads appsettings.json                                       │
│  • Executes commands via MediatR                                │
└────────────────┬────────────────────────────────────────────────┘
                 │
                 ↓
┌─────────────────────────────────────────────────────────────────┐
│  Migration.Tool.Common (Shared Infrastructure)                  │
│  • Command pipeline (MediatR handlers)                          │
│  • Configuration validation                                     │
│  • Migration protocol generation                                │
│  • Logging infrastructure                                       │
└────────┬────────────────────────────────────┬───────────────────┘
         │                                    │
         ↓                                    ↓
┌────────────────────────┐       ┌───────────────────────────────┐
│ Source Version Core    │       │ Migration.Tool.KXP.Api        │
│ (K11/KX12/KX13)        │       │ • Target DB context           │
│ • Handlers             │       │ • XbyK API wrappers           │
│ • Mappers              │       │ • Data validation             │
│ • Behaviors            │       └───────────────────────────────┘
└────────┬───────────────┘
         │
         ↓
┌────────────────────────┐
│ Source DB Models       │
│ (K11/KX12/KX13)        │
│ • EF Core DbContext    │
│ • Entity models        │
└────────────────────────┘
         │
         ↓ (optional)
┌────────────────────────────────────────────────────────────────┐
│ Migration.Tool.Extensions (Your Customizations)                │
│ • IFieldMigration implementations                              │
│ • IWidgetMigration implementations                             │
│ • Custom class mappings                                        │
└────────────────────────────────────────────────────────────────┘
```

**Key Insight:** You only directly interact with **Migration.Tool.CLI** (to run migrations) and **Migration.Tool.Extensions** (to add customizations). The other projects provide version-specific migration logic that works automatically based on your source instance version.

## How Data Migration Works

The migration tool acts as a bridge between your source and target databases, transforming data to match Xperience by Kentico's structure:

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         MIGRATION FLOW                                  │
└─────────────────────────────────────────────────────────────────────────┘

  ┌──────────────────┐
  │  1. You Execute  │
  │  CLI Command     │────┐
  └──────────────────┘    │
                          ↓
  ┌─────────────────────────────────────────────────────────────┐
  │  2. Tool Reads Configuration (appsettings.json)             │
  │     • Source database connection                            │
  │     • Target XbyK path                                      │
  │     • Custom migration settings                             │
  └────────────────────────────┬────────────────────────────────┘
                               ↓
  ┌─────────────────────────────────────────────────────────────┐
  │  3. Connect to Source Database (KX11/12/13)                 │
  │     ┌──────────┬──────────┬──────────┬─────────┐            │
  │     │ CMS_Site │ CMS_User │ CMS_Page │ CMS_... │            │
  │     └──────────┴──────────┴──────────┴─────────┘            │
  └────────────────────────────┬────────────────────────────────┘
                               ↓
  ┌─────────────────────────────────────────────────────────────┐
  │  4. Transform Data (Mappers & Migrations)                   │
  │     ┌────────────────────────────────────────────┐          │
  │     │ • Default mappings (built-in)              │          │
  │     │ • Field migrations (custom transformations)│          │
  │     │ • Widget migrations (Page Builder content) │          │
  │     │ • Class mappings (custom tables/modules)   │          │
  │     └────────────────────────────────────────────┘          │
  │                                                              │
  │     Example transformations:                                │
  │     • CMS_Site        → Website Channel                     │
  │     • CMS_User        → CMS_User (admin) + CMS_Member (live)│
  │     • CMS_Document    → Content Item                        │
  │     • CMS_Attachment  → Content Item Asset                  │
  │     • Page Builder    → New Page Builder format             │
  └────────────────────────────┬────────────────────────────────┘
                               ↓
  ┌─────────────────────────────────────────────────────────────┐
  │  5. Validate & Save to Target Database (XbyK)               │
  │     ┌──────────────────┬─────────────────┬──────────┐       │
  │     │ Website Channels │ Content Items   │ Assets   │       │
  │     └──────────────────┴─────────────────┴──────────┘       │
  └────────────────────────────┬────────────────────────────────┘
                               ↓
  ┌─────────────────────────────────────────────────────────────┐
  │  6. Generate Reports                                        │
  │     • Console output (real-time progress)                   │
  │     • Log files (detailed execution log)                    │
  │     • Migration Protocol (results, warnings, manual steps)  │
  └─────────────────────────────────────────────────────────────┘

                               ↓

  • Data migrated to Xperience by Kentico
  • Review protocol for required manual steps
```

**Key Points:**
- **Iterative** - Run multiple times, refining configuration each time
- **Selective** - Choose which data types to migrate via command parameters
- **Extensible** - Customize transformations for your specific needs
- **Documented** - Migration protocol reports what happened and next steps

## Library Version Matrix

View all [project releases](https://github.com/Kentico/xperience-by-kentico-kentico-migration-tool/releases/).

| Xperience Version | Library Version |
| ----------------- | --------------- |
| 30.12.0           | 3.20.0          |
| 30.11.0           | 3.18.0          |
| 30.10.1           | 3.16.0          |
| 30.8.0            | 3.12.0          |
| 30.6.0            | 3.8.0           |
| 30.5.1            | 3.6.0           |
| 30.4.0            | 3.4.0           |
| 30.3.1            | 3.3.0           |
| 30.2.0            | 3.0.0           |
| 30.1.1            | 2.3.0           |
| 30.0.0            | 2.0.0           |
| 29.7.0            | 1.6.0           |
| 29.6.0            | 1.4.0           |
| 29.5.2            | 1.3.0           |
| 29.3.3            | 1.2.0           |
| 29.2.0            | 1.1.0           |
| 29.1.0            | 1.0.0           |

## Dependencies

- [ASP.NET Core 8.0](https://dotnet.microsoft.com/en-us/download)
- [Xperience by Kentico](https://docs.kentico.com/changelog)

## Quick Start

Follow the steps below to run the Kentico Migration Tool:

1. Clone or download the source code from this repository.
2. Open the `.\Migration.Tool.sln` solution in your IDE.
3. Configure the options in the `.\Migration.Tool.CLI\appsettings.json` configuration file.

   - See [`Migration.Tool.CLI/README.md - Configuration`](./Migration.Tool.CLI/README.md#Configuration) for details.

4. Build the solution.
5. Open the repository folder [in a terminal](https://github.com/microsoft/terminal).
6. Navigate to the output directory of the `Migration.Tool.CLI` project.

   - `.\Migration.Tool.CLI\bin\Debug\net8.0`

7. Run the `Migration.Tool.CLI.exe migrate` command.

   - The following example shows the command with all parameters for complete migration:

     ```powershell
     .\Migration.Tool.CLI.exe  migrate --sites --custom-modules --users --settings-keys --page-types --pages --contact-management --forms --media-libraries --data-protection --custom-tables --members --categories
     ```

8. Review the command line output of the tool.

   - The output is also logged to a file `logs\log-<date>.txt` under the output directory by default.

9. Review the migration protocol output, which provides information about the result of the migration, lists required manual steps, etc.

   - The output file path is found in the `Migration.Tool.CLI/appsettings.json` configuration file under the `MigrationProtocolPath` setting.

The data is now migrated to the target Xperience by Kentico instance according to your configuration.

## Technical Documentation (This Repository)

This repository contains technical reference documentation for configuring and running the migration tool:

| Document | Purpose |
|----------|---------|
| **[Migration CLI README](./Migration.Tool.CLI/README.md)** | Commands, configuration options, object-specific instructions |
| **[Usage Guide](./docs/Usage-Guide.md)** | Supported versions, prerequisites, upgrade paths |
| **[Supported Data](./docs/Supported-Data.md)** | Complete list of what can/cannot be migrated |
| **[Extensions README](./Migration.Tool.Extensions/README.md)** | How to create custom migrations |
| **[Migration Protocol Reference](./Migration.Tool.CLI/MIGRATION_PROTOCOL_REFERENCE.md)** | Understanding migration results and warnings |
| **[Contributing Setup](./docs/Contributing-Setup.md)** | For contributors to this tool |

**For conceptual guides, planning resources, and walkthroughs**, see the **[Complete Documentation Hub](./docs/GUIDES.md)**.

> [!IMPORTANT]
> When planning an upgrade, note special considerations for [deploying to production](https://docs.kentico.com/guides/architecture/upgrade-from-kx13/upgrade-faq#are-there-special-considerations-when-deploying-an-upgraded-project-to-production-for-the-first-time) and [deploying to SaaS](https://docs.kentico.com/guides/architecture/upgrade-from-kx13/upgrade-faq#are-there-special-considerations-when-performing-an-upgrade-using-xperience-by-kentico-saas).

## Contributing

If you are [creating an issue](https://github.com/Kentico/xperience-by-kentico-kentico-migration-tool/issues/new), please provide all available information about the problem or error. If possible, include the command line output log file and migration protocol generated for your `Migration.Tool.CLI.exe migrate` command.

To see the guidelines for contributing to Kentico open source software, please see [Kentico's `CONTRIBUTING.md`](https://github.com/Kentico/.github/blob/main/CONTRIBUTING.md) for more information and follow the [Kentico's `CODE_OF_CONDUCT`](https://github.com/Kentico/.github/blob/main/CODE_OF_CONDUCT.md).

Instructions and technical details for **contributing to this project** can be found in [Contributing Setup](./docs/Contributing-Setup.md).

## License

Distributed under the MIT License. See [`LICENSE.md`](./LICENSE.md) for more information.

## Support

[![7-day bug-fix policy](https://img.shields.io/badge/-7--days_bug--fixing_policy-grey?labelColor=orange&logo=data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ic3ZnLWljb24iIHN0eWxlPSJ3aWR0aDogMWVtOyBoZWlnaHQ6IDFlbTt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO2ZpbGw6IGN1cnJlbnRDb2xvcjtvdmVyZmxvdzogaGlkZGVuOyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik04ODguNDkgMjIyLjY4NnYtMzEuNTRsLTY1LjY3Mi0wLjk1NWgtMC4yMDVhNDY1LjcxNSA0NjUuNzE1IDAgMCAxLTE0NC4zMTUtMzEuMzM0Yy03Ny4wMDUtMzEuMTk4LTEyNi4yOTQtNjYuNzY1LTEyNi43MDMtNjcuMTA3bC0zOS44LTI4LjY3Mi0zOS4xODUgMjguNDY4Yy0yLjA0OCAxLjUwMS00OS45MDMgMzYuMDQ0LTEyNi45MDggNjcuMzFhNDQ3LjQyIDQ0Ny40MiAwIDAgMS0xNDQuNTIgMzEuMzM1bC02NS44NzcgMC45NTZ2Mzc4Ljg4YzAgODcuMDQgNDkuODM0IDE4NC42NjEgMTM3LjAxIDI2Ny44MSAzNy41NDcgMzUuODQgNzkuMjU4IDY2LjM1NSAxMjAuODMzIDg4LjIgNDMuMjggMjIuNzMzIDg0LjI0IDM0LjYxMiAxMTguODUyIDM0LjYxMiAzNC40MDYgMCA3NS43NzYtMTIuMTUyIDExOS42MDMtMzUuMTU4YTU0Ny45NzcgNTQ3Ljk3NyAwIDAgMCAxMjAuMDEzLTg3LjY1NCA1MTUuMjA5IDUxNS4yMDkgMCAwIDAgOTYuMTg4LTEyMi44OGMyNy4xMDItNDkuNTYyIDQwLjgyMy05OC4zMDQgNDAuODIzLTE0NC45OTlsLTAuMTM2LTM0Ny4yMDR6TTUxMC4wOSAxNDMuNDI4bDEuNzA2LTEuMzY1IDEuNzc1IDEuMzY1YzUuODAzIDQuMTY1IDU5LjUyOSA0MS44NDggMTQwLjM1NiA3NC43NTIgNzkuMTkgMzIuMDg2IDE1My42IDM1LjYzNSAxNjcuNjYzIDM2LjA0NWwyLjU5NCAwLjA2OCAwLjIwNSAzMTUuNzM0YzAuMTM3IDY5LjQ5NS00Mi41OTggMTUwLjE4Ni0xMTcuMDc3IDIyMS40NTdDNjQxLjU3IDg1NC4yODkgNTYzLjEzIDg5Ni40NzggNTEyIDg5Ni40NzhjLTIzLjY4OSAwLTU1LjU3LTkuODk5LTg5LjcwMi0yNy43ODVhNDc4LjgyMiA0NzguODIyIDAgMCAxLTEwNS42MDktNzcuMjc4QzI0Mi4yMSA3MjAuMjEzIDE5OS40NzUgNjM5LjUyMiAxOTkuNDc1IDU2OS44OVYyNTQuMjI1bDIuNzMtMC4xMzZjMy4yNzggMCA4Mi42MDQtMS41MDIgMTY3LjY2NC0zNS45NzdhNzM5Ljk0MiA3MzkuOTQyIDAgMCAwIDE0MC4yMi03NC42MTV2LTAuMDY5eiIgIC8+PHBhdGggZD0iTTcxMy4zMTggMzY4LjY0YTMyLjIyMiAzMi4yMjIgMCAwIDAtNDUuMzI5IDBMNDQ5LjE5NSA1ODcuNDM1bC05My4xODQtOTMuMTE2YTMyLjIyMiAzMi4yMjIgMCAwIDAtNDUuMzMgMCAzMi4yMjIgMzIuMjIyIDAgMCAwIDAgNDUuMjZsMTE1Ljg1IDExNS44NWEzMi4yOSAzMi4yOSAwIDAgMCA0NS4zMjggMEw3MTMuMzIgNDEzLjlhMzIuMjIyIDMyLjIyMiAwIDAgMCAwLTQ1LjMzeiIgIC8+PC9zdmc+)](https://github.com/Kentico/.github/blob/main/SUPPORT.md#full-support)

This project has **Full support by 7-day bug-fix policy**.

- **Bug fixes are applied to the latest version only** - no backporting to previous releases
- **You must upgrade to the latest Migration Tool version** to receive bug fixes

See [`SUPPORT.md`](https://github.com/Kentico/.github/blob/main/SUPPORT.md#full-support) for more information.

> [!IMPORTANT]
> Before submitting a support ticket, please read about the [best practices on reporting Kentico Migration Tool and upgrade issues](https://docs.kentico.com/guides/architecture/upgrade-from-kx13/upgrade-faq#what-is-the-difference-between-the-documentation-in-the-github-repo-and-on-the-docs.kentico.com-site).

## Security

For any security issues, see [Kentico's `SECURITY.md`](https://github.com/Kentico/.github/blob/main/SECURITY.md).
